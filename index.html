<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Prompt Architect v4.0</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        :root {
            --bg-dark: #021027;
            --card-bg-dark: rgba(12, 122, 148, 0.1);
            --border-dark: rgba(117, 221, 221, 0.2);
            --text-primary-dark: #e0f7fa;
            --text-secondary-dark: #b0bec5;
            --input-bg-dark: rgba(12, 122, 148, 0.2);
            
            --bg-light: #f4f7f9;
            --card-bg-light: #ffffff;
            --border-light: #dbe4e8;
            --text-primary-light: #102a43;
            --text-secondary-light: #5a7184;
            --input-bg-light: #e9f5f9;

            --glow-color-1: #00e5ff;
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            font-family: var(--font-family);
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode { background-color: var(--bg-dark); color: var(--text-primary-dark); }
        body.light-mode { background-color: var(--bg-light); color: var(--text-primary-light); }

        .container { width: 100%; max-width: 1200px; padding: 40px 20px; margin: 0 auto; }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            text-align: left;
        }

        h1 { font-size: 2.5em; font-weight: 700; }
        .subtitle { font-size: 1.1em; margin-top: 10px; }
        body.dark-mode .subtitle { color: var(--text-secondary-dark); }
        body.light-mode .subtitle { color: var(--text-secondary-light); }
        
        /* Main Layout */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
        }

        .prompt-builder, .sidebar {
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        
        body.dark-mode .prompt-builder, body.dark-mode .sidebar {
            background: var(--card-bg-dark);
            border: 1px solid var(--border-dark);
        }
        body.light-mode .prompt-builder, body.light-mode .sidebar {
            background: var(--card-bg-light);
            border: 1px solid var(--border-light);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        
        .form-group, .param-group {
            margin-bottom: 20px;
        }

        .form-group label, .param-group label {
            font-size: 0.9em; font-weight: 600; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; display: block;
        }
        body.dark-mode label { color: var(--text-secondary-dark); }
        body.light-mode label { color: var(--text-secondary-light); }

        select, textarea {
            width: 100%; padding: 12px; font-size: 1em; border-radius: 8px; outline: none; transition: all 0.3s ease; font-family: var(--font-family);
        }
        
        body.dark-mode select, body.dark-mode textarea { background: var(--input-bg-dark); border: 1px solid var(--border-dark); color: var(--text-primary-dark); }
        body.light-mode select, body.light-mode textarea { background: var(--input-bg-light); border: 1px solid var(--border-light); color: var(--text-primary-light); }
        
        select { -webkit-appearance: none; -moz-appearance: none; appearance: none; background-repeat: no-repeat; background-position: right 15px top 50%; background-size: .65em auto; }
        body.dark-mode select { background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%2300e5ff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); }
        body.light-mode select { background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23102a43%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); }
        
        body.dark-mode select option { background: #083D56; }
        body.light-mode select option { background: #FFFFFF; }

        textarea { resize: vertical; min-height: 120px; }
        select:focus, textarea:focus { border-color: var(--glow-color-1); }
        body.dark-mode select:focus, body.dark-mode textarea:focus { box-shadow: 0 0 15px rgba(0, 229, 255, 0.3); }

        .param-controls { border-top: 1px solid; margin-top: 20px; padding-top: 20px; }
        body.dark-mode .param-controls { border-color: var(--border-dark); }
        body.light-mode .param-controls { border-color: var(--border-light); }

        .slider-container { display: flex; align-items: center; gap: 15px; }
        .slider-container input[type="range"] { flex-grow: 1; margin: 0; padding: 0;}
        .slider-container span { font-weight: 600; min-width: 40px; text-align: right; }

        .btn { padding: 12px 25px; font-size: 1em; font-weight: 600; border-radius: 50px; cursor: pointer; transition: all 0.3s ease; border: none; }
        .btn-primary { background-color: var(--glow-color-1); color: #021027; }
        .btn-primary:hover { transform: scale(1.05); }

        .sidebar h3 { font-size: 1.2em; margin-bottom: 20px; padding-bottom: 10px; }
        body.dark-mode .sidebar h3 { border-bottom: 1px solid var(--border-dark); }
        body.light-mode .sidebar h3 { border-bottom: 1px solid var(--border-light); }

        .prompt-list { max-height: 400px; overflow-y: auto; padding-right: 10px; }
        .prompt-item { padding: 12px; border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: background-color 0.2s; position: relative; }
        body.dark-mode .prompt-item:hover { background: rgba(0, 229, 255, 0.1); }
        body.light-mode .prompt-item:hover { background: rgba(0, 229, 255, 0.1); }

        .prompt-item pre { white-space: pre-wrap; word-wrap: break-word; font-size: 0.9em; line-height: 1.6; }
        
        .modifiers { margin-top: 20px; padding-top:20px; border-top: 1px solid; display: flex; flex-wrap: wrap; gap: 10px;}
        body.dark-mode .modifiers { border-color: var(--border-dark); }
        body.light-mode .modifiers { border-color: var(--border-light); }
        .modifier-btn { font-size: 0.8em; padding: 5px 10px; }

        .stats { margin-top: 20px; font-size: 0.9em; opacity: 0.7; }
        
        footer { margin-top: 50px; padding-top: 20px; text-align: center; }
        body.dark-mode footer { border-top: 1px solid var(--border-dark); }
        body.light-mode footer { border-top: 1px solid var(--border-light); }
        footer a { color: var(--glow-color-1); text-decoration: none; font-weight: 600; }
        
        /* Reused styles from v3 */
        .theme-switch-wrapper { display: flex; align-items: center; } .theme-switch { display: inline-block; height: 34px; position: relative; width: 60px; } .theme-switch input { display:none; } .slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: .4s; } .slider:before { background-color: #fff; bottom: 4px; content: ""; height: 26px; left: 4px; position: absolute; transition: .4s; width: 26px; } input:checked + .slider { background-color: var(--glow-color-1); } input:checked + .slider:before { transform: translateX(26px); } .slider.round { border-radius: 34px; } .slider.round:before { border-radius: 50%; }
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); backdrop-filter: blur(5px); } .modal-content { position: relative; margin: 10% auto; padding: 30px; border-radius: 15px; width: 80%; max-width: 600px; } body.dark-mode .modal-content { background: var(--bg-dark); border: 1px solid var(--border-dark); } body.light-mode .modal-content { background: var(--bg-light); border: 1px solid var(--border-light); } .close-btn { position: absolute; top: 15px; right: 20px; font-size: 2em; font-weight: bold; cursor: pointer; }
        .tabs { display: flex; margin-bottom: 15px; border-bottom: 1px solid; } body.dark-mode .tabs { border-color: var(--border-dark); } body.light-mode .tabs { border-color: var(--border-light); } .tab { padding: 10px 15px; cursor: pointer; border-bottom: 2px solid transparent; margin-bottom: -1px; font-weight: 600; } body.dark-mode .tab { color: var(--text-secondary-dark); } body.light-mode .tab { color: var(--text-secondary-light); } .tab.active { border-bottom-color: var(--glow-color-1); } body.dark-mode .tab.active { color: var(--text-primary-dark); } body.light-mode .tab.active { color: var(--text-primary-light); }
        .item-actions { position: absolute; top: 10px; right: 10px; display: flex; gap: 5px; } .item-actions button { background: none; border: none; cursor: pointer; font-size: 1.2em; opacity: 0.6; transition: opacity 0.2s; } body.dark-mode .item-actions button { color: var(--text-primary-dark); } body.light-mode .item-actions button { color: var(--text-primary-light); } .item-actions button:hover { opacity: 1; }
        .history-actions { display: flex; justify-content: space-between; align-items: center; }

    </style>
</head>
<body class="dark-mode">
    
    <div class="container">
        <header>
             <div>
                <h1>AI Command Console</h1>
                <p class="subtitle">v4.0 - The Director's Cut</p>
            </div>
            <div class="theme-switch-wrapper">
                <label class="theme-switch">
                    <input type="checkbox" id="theme-toggle">
                    <span class="slider round"></span>
                </label>
            </div>
        </header>

        <div class="main-content">
            <div class="prompt-builder">
                <div class="form-group">
                    <label for="model">Target Model</label>
                    <select id="model">
                        <option value="gemini">Google Gemini 1.5</option>
                        <option value="gpt">OpenAI GPT-4o</option>
                        <option value="claude">Anthropic Claude 3.5</option>
                    </select>
                </div>
                <div class="form-group"><label for="persona">Persona</label><select id="persona"><option value="Act as a seasoned Chief Marketing Officer">CMO</option><option value="Act as a data-driven DevOps Engineer">DevOps Engineer</option><option value="Act as a skeptical but fair journalist">Journalist</option><option value="Act as an enthusiastic UX Researcher">UX Researcher</option><option value="Act as a detail-oriented Product Manager">Product Manager</option><option value="Act as a visionary screenwriter">Screenwriter</option><option value="Act as an AI Ethicist">AI Ethicist</option></select></div>
                <div class="form-group"><label for="task">Task</label><select id="task"><option value="Your task is to write">Write</option><option value="Your task is to summarize">Summarize</option><option value="Your task is to create a strategic plan for">Create a Plan</option><option value="Your task is to analyze the pros and cons of">Analyze Pros & Cons</option><option value="Your task is to explain in simple terms">Explain Simply</option></select></div>
                <div class="form-group">
                    <label for="topic">Topic / Query</label>
                    <textarea id="topic" placeholder="e.g., The impact of Generative AI on B2B marketing funnels..."></textarea>
                </div>
                <div class="param-controls">
                    <div class="param-group">
                        <label for="temperature">Temperature (Creativity)</label>
                        <div class="slider-container">
                            <span>0.0</span>
                            <input type="range" id="temperature" min="0" max="1" step="0.1" value="0.7">
                            <span id="temperatureValue">0.7</span>
                        </div>
                    </div>
                     <div class="param-group">
                        <label for="maxTokens">Max Tokens (Length)</label>
                        <div class="slider-container">
                            <span>256</span>
                            <input type="range" id="maxTokens" min="256" max="4096" step="128" value="1024">
                            <span id="maxTokensValue">1024</span>
                        </div>
                    </div>
                </div>
                <div class="button-container" style="margin-top: 20px;">
                    <button id="generateBtn" class="btn btn-primary">Generate Prompt</button>
                </div>
                 <div class="stats">
                    <span>Est. Tokens: <b id="tokenCount">0</b></span> | 
                    <span>Est. Cost: <b id="costEstimate">$0.00000</b></span>
                </div>
            </div>
            <div class="sidebar">
                <div class="history-actions">
                    <h3>Workspace</h3>
                    <button id="mizsPromptsBtn" class="btn btn-secondary" style="padding: 8px 15px;">Miz's Prompts</button>
                </div>
                <div id="history" class="prompt-list tab-content active">
                    <!-- Last generated prompt will be here -->
                </div>
                <div class="modifiers">
                    <button class="btn modifier-btn" data-modifier="\n\nModifier: Make the response more concise.">Make Concise</button>
                    <button class="btn modifier-btn" data-modifier="\n\nModifier: Add more technical detail.">Add Detail</button>
                    <button class="btn modifier-btn" data-modifier="\n\nModifier: Challenge the initial premise.">Challenge Premise</button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Built by Miz Causevic. <a href="https://www.linkedin.com/in/mirzacausevic/" target="_blank" rel="noopener noreferrer">Connect on LinkedIn</a>.</p>
        </footer>
    </div>
    
    <div id="examplesModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>Miz's Curated Prompts</h3>
            <p class="subtitle" style="text-align: left; margin-top: 0; margin-bottom: 20px;">Click an example to load it into the console.</p>
            <div id="examples-list"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const state = { history: [], favorites: [] }; // Simplified for now

            const elements = {
                generateBtn: document.getElementById('generateBtn'),
                historyContainer: document.getElementById('history'),
                topicInput: document.getElementById('topic'),
                tokenCountEl: document.getElementById('tokenCount'),
                costEstimateEl: document.getElementById('costEstimate'),
                temperatureSlider: document.getElementById('temperature'),
                temperatureValue: document.getElementById('temperatureValue'),
                maxTokensSlider: document.getElementById('maxTokens'),
                maxTokensValue: document.getElementById('maxTokensValue'),
                modifierBtns: document.querySelectorAll('.modifier-btn'),
                mizsPromptsBtn: document.getElementById('mizsPromptsBtn'),
                examplesModal: document.getElementById('examplesModal'),
                closeModalBtn: document.querySelector('.close-btn'),
                examplesList: document.getElementById('examples-list'),
            };
            
            const mizsPrompts = [
                 { model: 'gemini', persona: 'Act as a seasoned Chief Marketing Officer', task: 'Your task is to create a strategic plan for', topic: 'a go-to-market strategy for a new B2B SaaS product targeting mid-market tech companies.', temperature: 0.7, maxTokens: 2048 },
                 { model: 'gpt', persona: 'Act as a data-driven DevOps Engineer', task: 'Your task is to write', topic: 'a post-mortem analysis for a minor site outage that occurred yesterday.', temperature: 0.3, maxTokens: 1024 },
                 { model: 'claude', persona: 'Act as an enthusiastic UX Researcher', task: 'Your task is to summarize', topic: 'the key findings from a user testing session for a new mobile app feature.', temperature: 0.5, maxTokens: 1024 }
            ];

            const renderHistory = () => {
                elements.historyContainer.innerHTML = '';
                if (state.history.length === 0) {
                    elements.historyContainer.innerHTML = `<p style="padding: 10px; opacity: 0.7;">Your generated prompt will appear here.</p>`;
                    return;
                }
                const promptText = state.history[0];
                const item = document.createElement('div');
                item.className = 'prompt-item';
                const pre = document.createElement('pre');
                pre.textContent = promptText;
                item.appendChild(pre);
                elements.historyContainer.appendChild(item);
            };

            const generatePrompt = () => {
                const model = document.getElementById('model').value;
                const persona = document.getElementById('persona').value;
                const task = document.getElementById('task').value;
                const topic = elements.topicInput.value.trim();
                const temperature = elements.temperatureSlider.value;
                const maxTokens = elements.maxTokensSlider.value;

                if (!topic) {
                    alert('Please enter a topic or query.');
                    return;
                }

                let finalPrompt = `---
MODEL_TARGET: ${model}
PARAMETERS:
  - temperature: ${temperature}
  - max_tokens: ${maxTokens}
---

[START PROMPT]

### PERSONA
${persona}

### TASK
${task}: "${topic}"

[END PROMPT]`;
                
                state.history.unshift(finalPrompt);
                if (state.history.length > 1) {
                    state.history.pop(); // Only keep the most recent prompt
                }
                
                renderHistory();
            };

            const updateParams = () => {
                elements.temperatureValue.textContent = elements.temperatureSlider.value;
                elements.maxTokensValue.textContent = elements.maxTokensSlider.value;
            };

            const estimateTokensAndCost = () => {
                const text = elements.topicInput.value;
                const tokens = Math.round(text.length / 4);
                const model = document.getElementById('model').value;
                let costPer1k;
                switch(model) {
                    case 'gpt': costPer1k = 0.0015; break;
                    case 'claude': costPer1k = 0.0012; break;
                    default: costPer1k = 0.00015; // Gemini
                }
                const cost = (tokens / 1000) * costPer1k;
                elements.tokenCountEl.textContent = tokens;
                elements.costEstimateEl.textContent = `$${cost.toFixed(5)}`;
            };

            const loadPrompt = (promptData) => {
                document.getElementById('model').value = promptData.model;
                document.getElementById('persona').value = promptData.persona;
                document.getElementById('task').value = promptData.task;
                elements.topicInput.value = promptData.topic;
                elements.temperatureSlider.value = promptData.temperature;
                elements.maxTokensSlider.value = promptData.maxTokens;
                updateParams();
                estimateTokensAndCost();
                elements.examplesModal.style.display = 'none';
            };

            const populateExamples = () => {
                elements.examplesList.innerHTML = '';
                 mizsPrompts.forEach(p => {
                    const item = document.createElement('div');
                    item.className = 'prompt-item';
                    const pre = document.createElement('pre');
                    pre.textContent = p.task + ': ' + p.topic.substring(0, 50) + '...';
                    item.appendChild(pre);
                    item.onclick = () => loadPrompt(p);
                    elements.examplesList.appendChild(item);
                });
            };

            // Event Listeners
            elements.generateBtn.addEventListener('click', generatePrompt);
            elements.temperatureSlider.addEventListener('input', updateParams);
            elements.maxTokensSlider.addEventListener('input', updateParams);
            elements.topicInput.addEventListener('input', estimateTokensAndCost);
            document.getElementById('model').addEventListener('change', estimateTokensAndCost);

            elements.modifierBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    if (state.history.length > 0) {
                        const modifiedPrompt = state.history[0].replace('[END PROMPT]', '') + btn.dataset.modifier + '\n\n[END PROMPT]';
                        state.history[0] = modifiedPrompt;
                        renderHistory();
                    } else {
                        alert("Generate a prompt first before modifying.");
                    }
                });
            });

            // Modal Logic
            elements.mizsPromptsBtn.onclick = () => elements.examplesModal.style.display = 'block';
            elements.closeModalBtn.onclick = () => elements.examplesModal.style.display = 'none';
            window.onclick = (event) => {
                if (event.target == elements.examplesModal) {
                    elements.examplesModal.style.display = 'none';
                }
            };
            
            // Initial calls
            renderHistory();
            updateParams();
            estimateTokensAndCost();
            populateExamples();
        });
    </script>
</body>
</html>
